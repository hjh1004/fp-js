<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>07/1</title>
    <script src="../../fx.js"></script>
  </head>

  <body>
    // 이미지 목록 그리기
    <script>
      const $ = {};
      //   $.qs = (sel, parent) => document.querySelector(sel, parent);
      $.qs = document.querySelector.bind(document);
      $.el = (html) => {
        const wrap = document.createElement("div");
        wrap.innerHTML = html;
        return wrap.children[0];
      };

      $.append = _.curry((parent, child) => parent.appendChild(child));
    </script>
    <script>
      const Images = {};
      Images.fetch = () =>
        new Promise((resolve) =>
          setTimeout(
            () =>
              resolve([
                {
                  name: "Heart",
                  url: "https://s.pstatic.net/static/www/img/uit/2021/sp_main_57f073.png",
                },
                {
                  name: "Heart 2",
                  url: "https://s.pstatic.net/static/www/img/uit/2021/sp_main_57f073.png",
                },
                {
                  name: "Heart 3",
                  url: "https://s.pstatic.net/static/www/img/uit/2021/sp_main_57f073.png",
                },
              ]),
            200
          )
        );

      const string = (iter) => _.reduce((a, b) => `${a}${b}`, iter);
      console.log(string([1, 2, 3]));
      //   _.strMap(_.pipe(L.map, string));
      _.strMap = _.curry(_.pipe(L.map, string));
      //   Images.tmpl = (imgs) => `
      //     <div class="images">
      //         ${string(
      //           _.map(
      //             (img) => `
      //             <div class ="image">
      //                 <div class="box"><img src="${img.url}" alt=""></div>
      //                 <div class="name">${img.name}></div>
      //             </div>
      //                 `,
      //             imgs
      //           )
      //         )}
      //     </div>
      //     `;

      Images.tmpl = (imgs) => `
        <div class="images">
            ${_.strMap(
              (img) => `
                <div class ="image">
                    <div class="box"><img src="${img.url}" alt=""></div>
                    <div class="name">${img.name}></div>
                </div>
                    `,
              imgs
            )}
        </div>
        `;

      _.go(
        Images.fetch(),
        Images.tmpl,
        $.el,
        // (el) => document.querySelector("body").append(el),
        // (el) => $.append($.qs("body"), el),
        $.append($.qs("body")),
        console.log
      );
    </script>
  </body>
</html>
